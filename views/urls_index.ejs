<!DOCTYPE html>

<html lang="en">

<head>

  <%- include("partials/_page_head") %>

  <title>TinyApp - URL Index</title>

</head>

<body>

  <%- include("partials/_header") %>

  <main style="margin: 1em;">

    <h3>My URLs</h3>

    <table class="table">

      <thead>
        <tr>
          <th scope="col">Short URL</th>
          <th scope="col">Long URL</th>
          <th scope="col">Visits</th>
          <th scope="col">Unique Visits</th>
          <th scope="col">Edit</th>
          <th scope="col">Delete</th>
        </tr>
      </thead>

      <tbody>
        <% if (!urls) { %>
        <tr>
          <td class="text-muted">Nothing to show</td>
        </tr>
        <% } else { %>
        <%   for (const shortURL in urls) { %>
        <tr>
          <td><a href="/u/<%= shortURL %>" target="_blank">tiny.app/u/<%= shortURL %></a></td>
          <td><a href="<%= urls[shortURL].longURL %>" target="_blank"><%= urls[shortURL].longURL %></a></td>
          <td><%= urls[shortURL].visits %></td>
          <td><%= urls[shortURL].uniqueVisits.length %></td>
          <td><form method="GET" action="/urls/<%= shortURL %>"><button class="btn btn-outline-primary">Edit</button></form></td>
          <td><form method="POST" action="/urls/<%= shortURL %>/delete?_method=DELETE"><button class="btn btn-outline-danger">Delete</button></form></td>
        </tr>
        <%   } %>
        <% } %>
      </tbody>

    </table>

  </main>

</body>

</html>
